# 开发日志（Append-only）

> 可以记录进展、问题、结论；但“决策”仍以 `决策日志.md` 为准。

## 记录格式（建议）
### YYYY-MM-DD
- 今日目标：
- 实际完成：
- 遇到的问题：
- ✅定稿结论（可写入决策日志/任务单）：
- 明日计划：

---

### 2026-02-09
- 今日目标：建立文档与日志体系，让后续讨论可转 Codex 工单。
- 实际完成：确定最小文档集合与 Append-only 记录规则。
- ✅定稿结论：采用“✅定稿才入决策/任务单”的机制。
- 明日计划：输出第一批 Codex 工单：工程骨架 + RBAC + 基础库表。

### 2026-02-10 14:14:05
- 目标：初始化根目录 Git 仓库并准备 GitHub 首版上传。
- 执行：创建根目录 .gitignore（忽略 .idea、target、开题报告 docx）；开始执行 git 初始化与首提交流程。
- 结果：已完成忽略规则落地，进入 git init/add/commit 阶段。
- 下一步：初始化 main 分支并完成首提交；拿到远端 URL 后推送并回写结果。

### 2026-02-10 14:14:54
- 目标：完成首提交并准备推送 GitHub。
- 执行：git init -b main、git add .、忽略规则核验、尝试 git commit。
- 结果：commit 被阻塞（未配置 user.name / user.email）；其余步骤已完成。
- 下一步：设置本仓库提交身份后重试 commit，并绑定 origin 推送 main。

### 2026-02-10 14:24:10
- 目标：完成 GitHub 首版上传并验证验收项。
- 执行：设置仓库提交身份；完成首提交（b921f2f）；绑定 origin=https://github.com/BCHIIEONG/jnu.git；推送 main；执行状态/忽略/远端分支检查。
- 结果：首版上传成功，origin/main 已创建并跟踪；开题报告 docx 命中忽略规则且未纳入版本库。
- 下一步：按任务单进入 BOOT-001 开发；后续每次操作继续仅追加写入本日志。

### 2026-02-10 14:42:55
- 目标：清理 GitHub 中仅供 Codex 使用的说明文件。
- 执行：删除 4 个 Codex 专用文件；更新 .gitignore 增加 Codex 文件忽略规则。
- 结果：仓库已完成清理，待提交并推送到 origin/main。
- 下一步：完成 commit/push，并给出明日向老师汇报的进展与下一步开发节奏。

### 2026-02-10 14:52:56
- 目标：纠正“仅远端删除 Codex 文件”的执行偏差，并保留本地可回退备份。
- 执行：从历史提交恢复 4 个 Codex 文件到本地工作区；在 备份/2026-02-10_codex_local_only 下生成同内容副本；更新 .gitignore 忽略 备份/。
- 结果：GitHub 仍不包含 Codex 文件；本地与备份均可回退使用；后续备份目录不会再被上传。
- 下一步：进入 BOOT-001 开发，并持续按“开发日志追加”记录。

### 2026-02-10 14:57:42
- 目标：把用户新确认的长期约束固化到执行说明，防止后续遗忘。
- 执行：更新 docs/CODEX_执行说明.md，新增“用户长期约束（2026-02-10）”；同步修正定稿记录路径为 log记录/定稿记录.txt。
- 结果：本地执行说明已固化规则；后续将按“新增规则即追加写入本文件”执行。
- 下一步：继续按 BOOT-001 开发节奏推进，并保持开发日志追加记录。

### 2026-02-10 15:06:04
- 目标：完成 BOOT-001 工程底座并形成可汇报成果。
- 执行：实现统一返回/全局异常/traceId 过滤器/参数校验统一返回；新增 /api/ping 与 /api/ping/echo；配置 Swagger 与 Actuator health；补充集成测试与文档状态更新。
- 结果：执行 lab-flow-report-system\\.\\mvnw.cmd -U clean test 通过（BUILD SUCCESS，5 tests）。
- 下一步：进入 DB-001（Flyway + RBAC 最小表结构）与 AUTH-001（JWT/RBAC 骨架）。

### 2026-02-10 16:29:15
- 目标：按 M2 追赶计划完成 DB-001、AUTH-001 与报告主链后端闭环。
- 执行：新增 Flyway 迁移脚本（V1~V3）、MyBatis-Plus 持久层、JWT 鉴权与 RBAC、安全统一 401/403 返回；实现任务/提交/批阅/反馈/导出接口；补充 H2 测试配置与端到端集成测试。
- 结果：lab-flow-report-system\\.\\mvnw.cmd -U clean test 通过（Tests run: 8, Failures: 0, Errors: 0）；主链接口可联调演示。
- 下一步：如需前端演示，进入 Vue 最小页面联调；如继续后端，进入签到链与设备链。

### 2026-02-10 19:26:38
- 目标：修复 XAMPP MariaDB(MySQL 5.5) 下 Flyway V2 迁移失败导致后端无法启动的问题。
- 执行：将 V2__task_report_core.sql 中的 CLOB 字段类型改为 LONGTEXT（兼容 MariaDB/MySQL）；回归执行 mvn test。
- 结果：lab-flow-report-system\\.\\mvnw.cmd -U clean test 通过（BUILD SUCCESS）。
- 下一步：删除并重建本机库 lab_flow_report（清理失败迁移记录），再启动后端验证 Swagger 可访问。

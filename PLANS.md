# PLANS.md — 实验室实验流程与实验报告管理系统（执行计划与约束）

> 目的：给自动化/协作开发提供“唯一真实来源”（Single Source of Truth）。
> 规则：任何重大决策先写入 `log记录/决策日志.md`，再改代码；本文件记录执行计划与当前状态。

## 1. 项目概述
- 论文/系统题目：基于 Spring Boot 与 Vue 的实验室实验流程与实验报告管理系统的设计与实现
- 目标：面向学生/教师/管理员三类角色，覆盖实验流程管理、实验报告提交与批阅、二维码签到等核心流程，形成可演示、可部署的最小完整系统（MVP）。

## 2. 范围与非目标（防止范围膨胀）
### 2.1 MVP 范围（先做这些）
- 工程底座：统一返回、异常处理、日志 traceId、参数校验、Swagger、健康检查
- 鉴权与权限：登录 + JWT + RBAC（三角色）
- 数据库：MySQL + Flyway 迁移
- 第一条业务闭环（后续批次）：任务发布 → 报告提交/附件 → 教师批阅评分 → 学生查看反馈

### 2.2 非目标（本阶段不做/不承诺）
- 大型复杂“讨论区/论坛/IM”等
- 多租户/多校区复杂权限体系
- 复杂对象存储/分布式部署（先本地存储即可）
- 过度工程化（按“家常菜但色香味俱全”的原则）

## 3. 技术栈（已定）
- 后端：Java 17、Maven、Spring Boot 3.5.x、Spring Security、JWT、MyBatis-Plus（后续加依赖）、MySQL、Flyway、springdoc-openapi
- 前端：Vue3、Vite、Element Plus、Pinia（后续批次）
- 文件：本地存储（后续可扩展）
- Redis：第一阶段不引入（必要时再加）

## 4. 仓库结构（建议）
- `lab-flow-report-system/`：Spring Boot 后端
- `frontend/`：Vue 前端（后续批次）
- `docs/`：长期说明书
- `log记录/`：决策日志 / 开发日志 / 任务单
- `log记录/定稿记录.txt`：基线参考

## 5. 工作方式（对自动化开发的约束）
- 先读文档再动手：`log记录/决策日志.md`、`Codex_第1批任务单_启动包.md`、本文件 `PLANS.md`
- 小步 PR：每个任务一个 PR，要求可编译、可运行、通过测试（至少 `mvn test`）
- 代码与注释保持工程化：不要写对话痕迹或工具宣传语；注释聚焦用途/边界/权限/异常
- 任何新增依赖/改动安全策略/改动数据库结构：必须在 PR 描述中说明原因与影响

## 6. 里程碑与状态
### Milestone A：底座可用（当前批次）
- [x] BOOT-001 工程底座与通用组件（统一返回/异常/日志/Swagger/健康检查）
- [x] DB-001 Flyway + RBAC 最小表结构 + 初始化数据
- [x] AUTH-001 登录 / JWT / RBAC（骨架）

### Milestone B：业务闭环 v1（下一批）
- [x] 任务管理（教师创建任务）
- [x] 报告提交（学生提交正文/附件/版本）
- [x] 批阅评分（教师评分评语）
- [x] 学生查看反馈
- [x] 导出成绩（CSV 优先）

## 7. 当前状态（手动维护）
- 2026-02-10：后端骨架已通过 `mvn test`（BUILD SUCCESS），可进入 Milestone A 开发。
- 2026-02-10：完成 BOOT-001（统一返回、全局异常、traceId、参数校验统一返回、`/api/ping`、Swagger、Actuator health），并通过 `.\mvnw.cmd -U clean test`。
- 2026-02-10：完成 DB-001（Flyway 迁移 + RBAC/任务/报告/批阅/导出核心表 + 种子账号）。
- 2026-02-10：完成 AUTH-001（`/api/auth/login`、`/api/auth/me`、`/api/auth/logout`、JWT + RBAC 鉴权）。
- 2026-02-10：后端 M2 主链已可跑通（教师发任务 → 学生提交 → 教师批阅 → 学生查看反馈 → 教师导出 CSV）；`.\mvnw.cmd -U clean test` 共 8 个测试通过。
